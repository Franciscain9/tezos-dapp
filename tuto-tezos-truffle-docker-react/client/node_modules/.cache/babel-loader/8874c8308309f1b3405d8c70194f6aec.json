{"ast":null,"code":"var _jsxFileName = \"/Users/anaischokote/franciscain/tezos-react-tutorial/client/src/index.js\";\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles.css\";\nimport Header from \"./QuizComponent/Header\";\nimport Quiz from \"./QuizComponent/Quiz\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Tezos } from \"@taquito/taquito\";\nimport { TezBridgeSigner } from \"@taquito/tezbridge-signer\";\nimport Menu from \"./Menu\";\n\nfunction App() {\n  /* PUT HERE THE CONTRACT ADDRESS FOR YOUR OWN SANDBOX! */\n  const contractAddress = \"KT1VMnVaD6C87DVxVV2bqAim6w3SjSYBQrhn\";\n\n  const shortenAddress = addr => addr.slice(0, 6) + \"...\" + addr.slice(addr.length - 6);\n\n  const mutezToTez = mutez => Math.round((parseInt(mutez) / 1000000 + Number.EPSILON) * 100) / 100;\n\n  const [contractInstance, setContractInstance] = useState(undefined);\n  const [userAddress, setUserAddress] = useState(undefined);\n  const [balance, setBalance] = useState(undefined);\n  const [contractBalance, setContractBalance] = useState(0);\n  const tezbridge = window.tezbridge;\n\n  const initWallet = async () => {\n    try {\n      // sets rpc host\n\n      /*const rpc = await tezbridge.request({\n        method: \"set_host\",\n        host: \"http://localhost:8732\"\n      });*/\n      // gets user's address\n      const _address = await tezbridge.request({\n        method: \"get_source\"\n      });\n\n      setUserAddress(_address); // gets user's balance\n\n      const _balance = await Tezos.tz.getBalance(_address);\n\n      setBalance(_balance); // gets user's points\n\n      const storage = await contractInstance.storage(); // compares user's address with owner's address\n    } catch (error) {\n      console.log(\"error fetching the address or balance:\", error);\n    }\n  };\n\n  useEffect(() => {\n    (async () => {\n      // sets RPC\n      Tezos.setProvider({\n        rpc: \"http://localhost:8732\",\n        signer: new TezBridgeSigner()\n      }); // fetches contract storage\n\n      const contract = await Tezos.contract.at(contractAddress);\n      setContractInstance(contract);\n      const storage = await contract.storage(); // creates coffee menu\n\n      let coffees = [];\n\n      for (let key of storage.menu.keys()) {\n        coffees.push({\n          name: key,\n          price: storage.menu.get(key).c[0]\n        });\n      } // updates state\n\n    })();\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"wallet\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, balance === undefined ? React.createElement(\"button\", {\n    className: \"button is-info is-light is-small\",\n    onClick: initWallet,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Connect your wallet\") : React.createElement(React.Fragment, null, React.createElement(\"span\", {\n    className: \"balance\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"\\uA729 \", balance.toNumber() / 1000000), React.createElement(\"div\", {\n    className: \"field is-grouped\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"button is-success is-light is-small\",\n    onClick: async () => {\n      setUserAddress(undefined);\n      setBalance(undefined);\n      await initWallet();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, shortenAddress(userAddress)))))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"center\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  })), React.createElement(Quiz, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  })));\n}\n\nconst rootElement = document.getElementById(\"root\"); // reader method for react \n\nReactDOM.render(React.createElement(App, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 120\n  },\n  __self: this\n}), rootElement);\nserviceWorker.unregister();","map":{"version":3,"sources":["/Users/anaischokote/franciscain/tezos-react-tutorial/client/src/index.js"],"names":["React","Fragment","useState","useEffect","ReactDOM","Header","Quiz","serviceWorker","Tezos","TezBridgeSigner","Menu","App","contractAddress","shortenAddress","addr","slice","length","mutezToTez","mutez","Math","round","parseInt","Number","EPSILON","contractInstance","setContractInstance","undefined","userAddress","setUserAddress","balance","setBalance","contractBalance","setContractBalance","tezbridge","window","initWallet","_address","request","method","_balance","tz","getBalance","storage","error","console","log","setProvider","rpc","signer","contract","at","coffees","key","menu","keys","push","name","price","get","c","toNumber","rootElement","document","getElementById","render","unregister"],"mappings":"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","sourcesContent":["\nimport React, { Fragment ,useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./styles.css\";\nimport Header from \"./QuizComponent/Header\";\nimport Quiz from \"./QuizComponent/Quiz\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport { Tezos } from \"@taquito/taquito\";\nimport { TezBridgeSigner } from \"@taquito/tezbridge-signer\";\nimport Menu from \"./Menu\";\n\nfunction App() {\n  /* PUT HERE THE CONTRACT ADDRESS FOR YOUR OWN SANDBOX! */\n  const contractAddress = \"KT1VMnVaD6C87DVxVV2bqAim6w3SjSYBQrhn\";\n\n  const shortenAddress = addr =>\n   addr.slice(0, 6) + \"...\" + addr.slice(addr.length - 6);\n\n  const mutezToTez = mutez =>\n   Math.round((parseInt(mutez) / 1000000 + Number.EPSILON) * 100) / 100;\n\n  const [contractInstance, setContractInstance] = useState(undefined);\n  const [userAddress, setUserAddress] = useState(undefined);\n  const [balance, setBalance] = useState(undefined);\n  const [contractBalance, setContractBalance] = useState(0);\n  const tezbridge = window.tezbridge;\n\n  const initWallet = async () => {\n    try {\n      // sets rpc host\n      /*const rpc = await tezbridge.request({\n        method: \"set_host\",\n        host: \"http://localhost:8732\"\n      });*/\n      // gets user's address\n      const _address = await tezbridge.request({ method: \"get_source\" });\n      setUserAddress(_address);\n      // gets user's balance\n      const _balance = await Tezos.tz.getBalance(_address);\n      setBalance(_balance);\n      // gets user's points\n      const storage = await contractInstance.storage();\n      // compares user's address with owner's address\n    } catch (error) {\n      console.log(\"error fetching the address or balance:\", error);\n    }\n  };\n\n\n  useEffect(() => {\n    (async () => {\n      // sets RPC\n      Tezos.setProvider({\n        rpc: \"http://localhost:8732\",\n        signer: new TezBridgeSigner()\n      });\n      // fetches contract storage\n      const contract = await Tezos.contract.at(contractAddress);\n      setContractInstance(contract);\n      const storage = await contract.storage();\n      // creates coffee menu\n      let coffees = [];\n      for (let key of storage.menu.keys()) {\n        coffees.push({ name: key, price: storage.menu.get(key).c[0] });\n      }\n      // updates state\n    })();\n  }, []);\n\n\n\n  return (\n    <div className = \"App\">\n      <div className=\"wallet\">\n          {balance === undefined ? (\n            <button\n              className=\"button is-info is-light is-small\"\n              onClick={initWallet}\n            >\n              Connect your wallet\n            </button>\n          ) : (\n            <>\n              <span className=\"balance\">êœ© {balance.toNumber() / 1000000}</span>\n              <div className=\"field is-grouped\">\n                <p className=\"control\">\n                  <button\n                    className=\"button is-success is-light is-small\"\n                    onClick={async () => {\n                      setUserAddress(undefined);\n                      setBalance(undefined);\n                      await initWallet();\n                    }}\n                  >\n                    {shortenAddress(userAddress)}\n                  </button>\n                </p>\n              </div>\n            </>\n          )}\n        </div>\n\n    <div>\n\n      {/* header Components */}\n       <center><Header /></center> \n\n      {/* Quiz Components */}\n        <Quiz />\n      \n    </div> \n    </div>\n  )\n}\n\nconst rootElement = document.getElementById(\"root\");\n// reader method for react \nReactDOM.render(<App />, rootElement);\nserviceWorker.unregister();\n"]},"metadata":{},"sourceType":"module"}